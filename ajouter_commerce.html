<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un commerce - KaribConnect</title>
</head>
<body>
<header>
    <h1>üå¥ KaribConnect</h1>
    <nav>
        <a href="index.html">‚Üê Retour √† l'accueil</a>
    </nav>
    <style>
    form > section {
        display: none;
    }

    form > section.active {
        display: block;
    }

    .progress {
        margin-bottom: 20px;
    }

    .step-buttons {
        margin-top: 20px;
    }
</style>

</header>

<main>
    <h2>Ajouter votre commerce</h2>
    <p>Remplissez ce formulaire pour r√©f√©rencer votre √©tablissement sur KaribConnect</p>
    <!-- Barre de progression -->
    <div class="progress">
        <progress id="progressBar" value="1" max="6"></progress>
        <p>√âtape <span id="stepNumber">1</span> / 6</p>
    </div>

    <form action="/api/commerces" method="POST" enctype="multipart/form-data">
        
        <!-- √âtape 1 : Informations g√©n√©rales -->
        <section>
            <h3>1Ô∏è‚É£ Informations g√©n√©rales</h3>
            
            <div class="form-group">
                <label for="nom-commerce">Nom du commerce * :</label>
                <input 
                    type="text" 
                    id="nom-commerce" 
                    name="nom" 
                    required
                    minlength="3"
                    maxlength="100"
                    placeholder="Ex: La Savane Gourmande"
                >
            </div>

            <div class="form-group">
                <label for="categorie">Cat√©gorie * :</label>
                <select id="categorie" name="categorie" required>
                    <option value="">S√©lectionnez une cat√©gorie</option>
                    <option value="alimentation">Alimentation</option>
                    <option value="restaurant">Restaurant</option>
                    <option value="vetements">V√™tements</option>
                    <option value="electronique">√âlectronique</option>
                    <option value="beaute">Beaut√© & Bien-√™tre</option>
                    <option value="services">Services</option>
                </select>
            </div>

            <div class="form-group">
                <label for="description">Description * :</label>
                <textarea 
                    id="description" 
                    name="description" 
                    required
                    minlength="50"
                    maxlength="500"
                    rows="5"
                    placeholder="D√©crivez votre commerce, vos produits et services..."
                ></textarea>
                <small>Minimum 50 caract√®res</small>
            </div>
        </section>

        <!-- √âtape 2 : Coordonn√©es -->
        <section>
            <h3>2Ô∏è‚É£ Coordonn√©es</h3>
            
            <div class="form-group">
                <label for="adresse">Adresse * :</label>
                <input 
                    type="text" 
                    id="adresse" 
                    name="adresse" 
                    required
                    placeholder="Num√©ro et nom de rue"
                >
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="code-postal">Code postal * :</label>
                    <input 
                        type="text" 
                        id="code-postal" 
                        name="code-postal" 
                        required
                        pattern="972\d{2}"
                        placeholder="97200"
                    >
                </div>

                <div class="form-group">
                    <label for="ville">Ville * :</label>
                    <input 
                        type="text" 
                        id="ville" 
                        name="ville" 
                        required
                        placeholder="Fort-de-France"
                    >
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="telephone">T√©l√©phone * :</label>
                    <input 
                        type="tel" 
                        id="telephone" 
                        name="telephone" 
                        required
                        pattern="0[5-7][0-9]{8}"
                        placeholder="0596123456"
                    >
                </div>

                <div class="form-group">
                    <label for="email">Email :</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email"
                        placeholder="contact@exemple.com"
                    >
                </div>
            </div>

            <div class="form-group">
                <label for="site-web">Site web :</label>
                <input 
                    type="url" 
                    id="site-web" 
                    name="site-web"
                    placeholder="https://www.exemple.com"
                >
            </div>
        </section>

        <!-- √âtape 3 : Horaires -->
        <section>
            <h3>3Ô∏è‚É£ Horaires d'ouverture</h3>
            
            <fieldset>
                <legend>Jours d'ouverture :</legend>
                
                <div class="horaires-group">
                    <label>
                        <input type="checkbox" name="jours[]" value="lundi" checked>
                        Lundi
                    </label>
                    <input type="time" name="lundi-ouverture" value="08:00">
                    √†
                    <input type="time" name="lundi-fermeture" value="18:00">
                </div>

                <div class="horaires-group">
                    <label>
                        <input type="checkbox" name="jours[]" value="mardi" checked>
                        Mardi
                    </label>
                    <input type="time" name="mardi-ouverture" value="08:00">
                    √†
                    <input type="time" name="mardi-fermeture" value="18:00">
                </div>

                <div class="horaires-group">
                    <label>
                        <input type="checkbox" name="jours[]" value="mercredi" checked>
                        Mercredi
                    </label>
                    <input type="time" name="mercredi-ouverture" value="08:00">
                    √†
                    <input type="time" name="mercredi-fermeture" value="18:00"> 
                </div>
                
                <div class="horaires-group">
                    <label>
                        <input type="checkbox" name="jours[]" value="jeudi" checked>
                        Jeudi
                    </label>
                    <input type="time" name="jeudi-ouverture" value="08:00">
                    √†
                    <input type="time" name="jeudi-fermeture" value="18:00">
                </div>
                
                <div class="horaires-group">
                    <label>
                        <input type="checkbox" name="jours[]" value="vendredi" checked>
                        Vendredi
                    </label>
                    <input type="time" name="vendredi-ouverture" value="08:00">
                    √†
                    <input type="time" name="vendredi-fermeture" value="18:00">
                </div>
                
                <div class="horaires-group">
                    <label>
                        <input type="checkbox" name="jours[]" value="samedi">
                        Samedi
                    </label>
                    <input type="time" name="dimanche-ouverture">
                    √†
                    <input type="time" name="dimanche-fermeture">
                </div>

                <div class="horaires-group">
                    <label>
                        <input type="checkbox" name="jours[]" value="dimanche">
                        Dimanche
                    </label>
                    <input type="time" name="dimanche-ouverture">
                    √†
                    <input type="time" name="dimanche-fermeture">
                </div>    
            </fieldset>
        </section>

        <!-- √âtape 4 : Services et options -->
        <section>
            <h3>4Ô∏è‚É£ Services propos√©s</h3>
            
            <fieldset>
                <legend>S√©lectionnez tous les services disponibles :</legend>
                
                <div class="checkbox-grid">
                    <label>
                        <input type="checkbox" name="services[]" value="livraison">
                        üöö Livraison √† domicile
                    </label>
                    <label>
                        <input type="checkbox" name="services[]" value="click-collect">
                        üì¶ Click & Collect
                    </label>
                    <label>
                        <input type="checkbox" name="services[]" value="parking">
                        üÖøÔ∏è Parking disponible
                    </label>
                    <label>
                        <input type="checkbox" name="services[]" value="wifi">
                        üì∂ WiFi gratuit
                    </label>
                    <label>
                        <input type="checkbox" name="services[]" value="cb">
                        üí≥ Paiement CB
                    </label>
                    <label>
                        <input type="checkbox" name="services[]" value="accessible">
                        ‚ôø Accessible PMR
                    </label>
                </div>
            </fieldset>

            <div class="form-group">
                <label for="gamme-prix">Gamme de prix :</label>
                <select id="gamme-prix" name="gamme-prix">
                    <option value="economique">‚Ç¨ √âconomique</option>
                    <option value="moyen" selected>‚Ç¨‚Ç¨ Moyen</option>
                    <option value="premium">‚Ç¨‚Ç¨‚Ç¨ Premium</option>
                </select>
            </div>
        </section>

        <!-- √âtape 5 : Photos -->
        <section>
            <h3>5Ô∏è‚É£ Photos de votre commerce</h3>
            
            <div class="form-group">
                <label for="photo-principale">Photo principale * :</label>
                <input 
                    type="file" 
                    id="photo-principale" 
                    name="photo-principale" 
                    accept="image/jpeg,image/png,image/webp"
                    required
                >
                <small>Formats accept√©s : JPG, PNG, WebP (max 5 Mo)</small>
            </div>

            <div class="form-group">
                <label for="photos-galerie">Galerie photos (optionnel) :</label>
                <input 
                    type="file" 
                    id="photos-galerie" 
                    name="photos-galerie" 
                    accept="image/jpeg,image/png,image/webp"
                    multiple
                >
                <small>Ajoutez jusqu'√† 10 photos suppl√©mentaires</small>
            </div>
        </section>

        <!-- Conditions -->
        <section>
            <div class="form-group">
                <label>
                    <input type="checkbox" name="cgv" required>
                    J'accepte les <a href="cgv.html" target="_blank">conditions g√©n√©rales d'utilisation</a> *
                </label>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" name="newsletter">
                    Je souhaite recevoir les actualit√©s de KaribConnect
                </label>
            </div>
        </section>

        <!-- Actions finales -->
        <div class="form-actions">
            <button type="submit" class="btn-primary">
                ‚úÖ Publier mon commerce
            </button>
            <button type="reset" class="btn-secondary">
                ‚Ü∫ R√©initialiser le formulaire
            </button>
        </div>

        <p class="form-note">
            * Champs obligatoires<br>
            Votre commerce sera v√©rifi√© avant publication (d√©lai 24-48h)
        </p>
    </form>
</main>

<footer>
    <p>&copy; 2026 KaribConnect</p>
</footer>
<script>
    const sections = document.querySelectorAll("form > section");
    const progressBar = document.getElementById("progressBar");
    const stepNumber = document.getElementById("stepNumber");
    let currentStep = 0;

    // Initialisation
    sections[0].classList.add("active");
    updateProgress();

    // Ajout des boutons Pr√©c√©dent / Suivant
    sections.forEach((section, index) => {
        const nav = document.createElement("div");
        nav.className = "step-buttons";

        if (index > 0) {
            const prevBtn = document.createElement("button");
            prevBtn.type = "button";
            prevBtn.textContent = "‚Üê Pr√©c√©dent";
            prevBtn.onclick = () => changeStep(index - 1);
            nav.appendChild(prevBtn);
        }

        if (index < sections.length - 1) {
            const nextBtn = document.createElement("button");
            nextBtn.type = "button";
            nextBtn.textContent = "Suivant ‚Üí";
            nextBtn.onclick = () => changeStep(index + 1);
            nav.appendChild(nextBtn);
        }

        section.appendChild(nav);
    });

    function changeStep(step) {
        saveData();
        sections[currentStep].classList.remove("active");
        currentStep = step;
        sections[currentStep].classList.add("active");
        updateProgress();
    }

    function updateProgress() {
        progressBar.value = currentStep + 1;
        stepNumber.textContent = currentStep + 1;
    }

    // Sauvegarde automatique
    function saveData() {
        const data = {};
        document.querySelectorAll("input, select, textarea").forEach(el => {
            if (el.type === "checkbox") {
                data[el.name + el.value] = el.checked;
            } else if (el.type !== "file") {
                data[el.name] = el.value;
            }
        });
        localStorage.setItem("karibconnect-form", JSON.stringify(data));
    }

    // Chargement automatique
    function loadData() {
        const saved = JSON.parse(localStorage.getItem("karibconnect-form"));
        if (!saved) return;

        document.querySelectorAll("input, select, textarea").forEach(el => {
            if (el.type === "checkbox") {
                el.checked = saved[el.name + el.value] || false;
            } else if (saved[el.name] && el.type !== "file") {
                el.value = saved[el.name];
            }
        });
    }

    document.addEventListener("DOMContentLoaded", loadData);
</script>

</body>
</html>